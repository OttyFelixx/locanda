<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />  
  <link type='text/css' href='css/south-street/jquery-ui-1.8.9.custom.css' rel='stylesheet' />
  <link type="text/css" href="css/layout_sliding_door.css" rel="stylesheet"  />  
  
  <script type='text/javascript' src='js/lib/jquery-1.4.4.min.js'></script>
  <!--
    <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js'></script>
  -->
  <script type='text/javascript' src='js/lib/jquery-ui-1.8.9.custom.min.js'></script>
  <script type='text/javascript' src='js/ftod.js'></script><!-- per i menu a tendina -->
  <script type='text/javascript' src='js/jquery.validate.min.js'></script>
  <script type="text/javascript">
  $(function(){
	
	var values = []; 
	$(".yform").validate();
	$(".btn_addExtra").show();
  	$(".btn_addExtra").button({
  		icons: {
            primary: "ui-icon-circle-plus"
        }
  	});
	
  	$(".btn_saveExtra").button({
  		icons: {
            primary: "ui-icon-check"
        }
  	});
	
  	$(".btn_cancel").button({
  		icons: {
            primary: "ui-icon-cancel"
        }
  	});
	
    $(".btn_addExtra").click(function() {
      $(this).hide();	
	  $("#extraForm").show();
  	});
	
	$(".btn_saveExtra").click(function() {
	  $("#extraForm").hide();
	  values.push($("#extraFormName").val());
	  var added = $("#newExtra").clone().insertAfter("#newExtra").attr("id", function(){ //clono il div e appendo all'id un progressivo
	  	return this.id + "_" + values.length;
	  	});
	  added.find("input").attr("name", function(){ //appendo al name dei radio button un progressivo
	  	return this.name + "_" + values.length;
	  	});
	  added.find(".renameExtra").before('<span class="extraName">' + values[values.length-1] + '</span>'); //inserisco prima del link il nome dell'extra
	  added.find("input:text").val(function(){ //assegno al value dell'input text il nome dell'extra
	  	return values[values.length-1];
	  	});
	  added.find(".deleteExtra").click(function(){
	    var extraName = added.find(".extraName").text();
	  /*var index = added.attr("id").substr((added.attr("id").lastIndexOf("_")+1)); memorizzo l'indice del div corrente - errato perch√® gli indici non si aggiornano man mano che elimino elementi */
		var index = values.indexOf(extraName); //memorizzo l'indice del div corrente usando il nome dell'extra
		values.splice(index,1); //elimino l'elemento corrispondente dall'array
		$(this).closest(".newExtra").remove(); //elimino il div al click del link "delete"
		});	
	  added.find(".renameExtra").click(function(){ //gestisco il rename facendo comparire il form relativo
	  	$(this).hide();
	    $(this).siblings(".extraName").hide();
		$(this).siblings("input:text").show();
		$(this).siblings("input:text").select();
	  });
	  added.find("input:text").blur(function(){ //gestisco il blur per salvare la rinomina dell'extra
		  var extraName = added.find(".extraName").text();
		  var index = values.indexOf(extraName); //memorizzo l'indice del div corrente usando il nome dell'extra
		  var newName = added.find("input:text").val(); //memorizzo il nome dell'extra modificato
		  values.splice(index,1, newName);
		  $(this).hide();
		  $(".renameExtra").show();
		  $(this).siblings(".extraName").text(newName);
		  $(".extraName").show();
		});
	  
	  
	  $(".btn_addExtra").show();
	  $("#extraList").show();
    });
	
    $(".btn_cancel").click(function() {	
  	  $("#extraForm").hide();
  	  $(".btn_addExtra").show();
    })
  });
  </script>
  
  <title>LOCANDA - Open Source Booking Tool</title><!-- (en) Add your meta data here -->
  <!--[if lte IE 7]>
	<link href="css/patches/patch_sliding_door.css" rel="stylesheet" type="text/css" />
  <![endif]-->
</head>
<body>
  <!-- skip link navigation -->
  <ul id="skiplinks">
    <li><a class="skip" href="#nav">Skip to navigation (Press Enter).</a></li>
    <li><a class="skip" href="#col3">Skip to main content (Press Enter).</a></li>
  </ul>
  <div class="page_margins">
    <div class="page">
      <div id="header" role="banner">
        <div id="topnav" role="contentinfo">
          <span><a href="#">Not Logged In</a> | <a href="login.html">Login/Signup</a></span>
        </div>
        <h1>
        <span>&nbsp;</span><em>&nbsp;</em></h1><span></span>
      </div><!-- begin: main navigation #nav -->
      <div id="nav" role="navigation">
        <div class="hlist">
          <ul>
            <li><a href="index.html">Planner</a></li>
            <li><a href="rooms.html">Accomodation</a>
            <ul class="sub_menu ui-menu ui-widget ui-widget-content ui-corner-all">
    			<li class="ui-menu-item"><a href="accomodation.html">ACCOMODATION</a></li>
    			<li class="ui-menu-item"><a href="extras.html">EXTRAS</a></li>
  			</ul>
            </li>
            <li><a href="guests.html">Guests</a></li>
            <li><a href="#">Reports</a></li>
            <li class="active"><strong>Settings</strong>
                <ul class="sub_menu ui-menu ui-widget ui-widget-content ui-corner-all">
    			<li class="ui-menu-item"><a href="online.html">ONLINE BOOKINGS</a></li>
    			<li class="ui-menu-item"><a href="seasons.html">SEASONS</a></li>
    			<li class="ui-menu-item"><a href="emails.html">EMAILS</a></li>
    			<li class="ui-menu-item"><a href="details.html">YOUR DETAILS</a></li>
    			<li class="ui-menu-item"><a href="discount.html">DISCOUNT</a></li>
  			</ul>
            </li>         
            <li><a href="#">Help</a></li>
          </ul>
        </div>
      </div><!-- end: main navigation -->
      
      <!-- begin: main content area #main -->
      <div id="main">
        <!-- begin: #col1 - first float column -->
        <div id="col1" role="complementary">
          <div id="col1_content" class="clearfix">
          </div>
        </div><!-- end: #col1 -->
        <!-- begin: #col3 static column -->
        <div id="col3" role="main">
          <div id="col3_content" class="clearfix">
          	<div class="header_section">
          	  <span class="name_section">Manage Extras</span>
      	 	</div>
      	
               <span class="yform">
                   <fieldset>
                       <legend>
                           Insert and configure extras here
                       </legend>
                       <div>
                           <button class="btn_addExtra" role="button" aria-disabled="false">
                               Add Extra
                           </button>
                       </div>
					   
                       <form method="post" action="" class="yform" id="extraForm" role="application">
                           <div class="type-text">
                               <label for="extraFormName">
                                   Extra name
                               </label>
                               <input type="text" class="required" name="extraFormName" id="extraFormName" aria-required="true"/>
                           </div>
                           <div class="type-button">
                               <button class="btn_saveExtra" role="button" type="button" aria-disabled="false">
                                   Save
                               </button>
                               <button class="btn_cancel" role="button" type="button" aria-disabled="false">
                                   Cancel
                               </button>
                           </div>	   
                       </form>
					   
                       <div id="extraList">
                           <div class="newExtra "id="newExtra">
                             <hr/>
							 <input type="text" class="renameExtraForm" name="renameExtraForm" value=""/>
							 <a href="#" class="renameExtra" title="rename">(Rename)</a>
							 <a href="#" class="deleteExtra" title="delete">Delete extra</a>
                           	 <div class="radiogroup">
							 <input type="radio" name="rate1" value="room" />per Room
                             <br/>
                             <input type="radio" name="rate1" value="person" />per Person
                             <br/>
                             <input type="radio" name="rate1" value="item" />per Item
							 </div>
							 <div class="radiogroup">
							 <input type="radio" name="rate2" value="night" />per Night
                             <br/>
                             <input type="radio" name="rate2" value="week" />per Week
                             <br/>
                             <input type="radio" name="rate2" value="booking" />per Booking
							 </div>
                       	   </div>
                       </div>
                   </fieldset>
               </span>
		  
		  </div><!-- end: #col3_content-->
		  
          <div id="ie_clearing">
            &nbsp;
          </div><!-- End: IE Column Clearing -->
		     
        </div><!-- end: #col3 -->
      </div><!-- end: #main -->
	  
      <!-- begin: #footer -->   
      <div id="footer" role="contentinfo">
        <img src="images/labos-small.png" alt="Laboratorio Open Source" class="left" />
        <img src="images/sardegna_ricerche.png" alt="Sardegna Ricerche" class="left" />
        <img src="images/regione.gif" alt="Regione Autonoma della Sardegna" class="right" />
        <img src="images/governo.gif" alt="Repubblica Italiana" class="right" />
        <img src="images/unione_europea.gif" alt="Unione Europea" class="right" />
        <span class="center">Locanda<br />
        Open Source Booking Software<br /><br /></span>
        </div><!-- end: #footer -->
    </div><!-- end: #page_margins -->
  </div><!-- full skiplink functionality in webkit browsers -->
  <script src="yaml/core/js/yaml-focusfix.js" type="text/javascript">
</script>
</body>
</html>